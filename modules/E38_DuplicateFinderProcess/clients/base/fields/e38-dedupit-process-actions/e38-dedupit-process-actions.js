({plugins:['EllipsisInline'],retrieving_data:!1,buttons_retrieving:!0,detail_view:false,action_buttons:{e38_define_detection_rules:{id:'e38_define_detection_rules',label:'LBL_DEFINE_DETECTION_RULES',classes:'btn btn-default btn-mini',},},events:{'click #e38_define_detection_rules':'openDuplicateRulesDrawer','click #e38_enable_automerge_process':'openEnableAutomergeDrawer','click #e38_disable_automerge_process':'disableAutoMerge','click #e38_activate_process':'activateProcess','click #e38_deactivate_process':'deactivateProcess',},initialize:function(a){var self=this;self.retrieving_data=!1;self.buttons_retrieving=!0;self.action_buttons={e38_define_detection_rules:{id:'e38_define_detection_rules',label:'LBL_DEFINE_DETECTION_RULES',classes:'btn btn-default btn-mini',},};self._super('initialize',[a]);self.detail_view=!(self.hasOwnProperty('action')&&self.action=='edit')&&typeof self.context.get('create')=='undefined';app.data.createBean(self.module,{id:self.model.get('id')}).fetch({success:function(duplicate_finder_process_bean){'yes'==duplicate_finder_process_bean.get('automerge')?self.action_buttons.e38_disable_automerge_process={id:'e38_disable_automerge_process',label:'LBL_DISABLE_AUTOMERGE_PROCESS',classes:'btn btn-danger btn-mini',}:self.action_buttons.e38_enable_automerge_process={id:'e38_enable_automerge_process',label:'LBL_ENABLE_AUTOMERGE_PROCESS',classes:'btn btn-primary btn-mini',};'no'==duplicate_finder_process_bean.get('active')?self.action_buttons.e38_activate_process={id:'e38_activate_process',label:'LBL_ACTIVATE_PROCESS',classes:'btn btn-success btn-mini',}:self.action_buttons.e38_deactivate_process={id:'e38_deactivate_process',label:'LBL_DEACTIVATE_PROCESS',classes:'btn btn-danger btn-mini',};var configuration=duplicate_finder_process_bean.get('rules_configuration');if(typeof configuration!='undefined'&&configuration!=''&&self.action_buttons.e38_enable_automerge_process&&configuration.includes('$fuzzy')){self.action_buttons.e38_enable_automerge_process.disabled=true;self.action_buttons.e38_enable_automerge_process.tooltip='foo';}
self.buttons_retrieving=!1;self.render();},error:function(a){self.handleError(a);},});},openDuplicateRulesDrawer:function(){var a=this;app.alert.show('fetching-bean',{level:'process',autoClose:!1});a.retrieving_data||(a.retrieving_data=!0,app.data.createBean(a.module,{id:a.model.get('id')}).fetch({success:function(b){app.alert.dismiss('fetching-bean');app.drawer.open({layout:'duplicate-rules',context:{module:'E38_DuplicateFinderProcess',model:b,'this':a},},function(a,b){app.router.refresh();});a.retrieving_data=!1;},error:function(b){a.handleError(b);},}));},openEnableAutomergeDrawer:function(){if(this.model.get('rules_configuration').includes('$fuzzy')){app.alert.show('fuzzy-config-error',{level:'error',messages:app.lang.get('NTF_ACTIVATING_FUZZY_CONFIG','E38_DuplicateFinderProcess'),autoClose:!1,});return;}
var a=this;app.alert.show('fetching-bean',{level:'process',autoClose:!1});a.retrieving_data||(a.retrieving_data=!0,app.data.createBean(a.module,{id:a.model.get('id')}).fetch({success:function(b){app.alert.dismiss('fetching-bean');app.drawer.open({layout:'enable-automerge',context:{module:'E38_DuplicateFinderProcess',model:b,'this':a},},function(a,b){app.router.refresh();});a.retrieving_data=!1;},error:function(b){a.handleError(b);},}));},disableAutoMerge:function(){var a=this;app.alert.show('disable-automerge-confirm',{level:'confirmation',messages:app.lang.get('NTF_DISABLE_AUTOMERGE_CONFIRM','E38_DuplicateFinderProcess'),autoClose:!1,onConfirm:function(){app.alert.show('disable-automerge',{level:'process',title:app.lang.get('NTF_DISABLING_AUTOMERGE','E38_DuplicateFinderProcess'),});a.model.set('automerge_configuration','');a.model.set('automerge','no');a.model.save({},{success:function(a){app.alert.dismiss('disable-automerge');app.alert.show('automerge-disabled',{level:'success',messages:app.lang.get('NTF_AUTOMERGE_DISABLED','E38_DuplicateFinderProcess'),autoClose:!0,});app.router.refresh();},error:function(b){a.handleError(b);},});},});},activateProcess:function(){var a=this;app.alert.show('activating-process',{level:'process',title:app.lang.get('NTF_PROCESS_IS_BEING_ACTIVATED','E38_DuplicateFinderProcess'),autoClose:!1,});app.data.createBean(a.module,{id:a.model.get('id')}).fetch({success:function(b){b.get('rules_configuration')?(b.set('active','yes'),b.save({},{success:function(b){app.alert.dismiss('activating-process');app.alert.show('process-activated',{level:'success',messages:app.lang.get('NTF_PROCESS_ACTIVATED','E38_DuplicateFinderProcess'),autoClose:!0,});delete a.action_buttons.e38_activate_process;a.action_buttons.e38_deactivate_process={id:'e38_deactivate_process',label:'LBL_DEACTIVATE_PROCESS',classes:'btn btn-danger btn-mini',};a.render();app.router.refresh();},error:function(b){a.handleError(b);},})):(app.alert.dismissAll(),app.alert.show('set-config-first',{level:'error',messages:app.lang.get('NTF_SE38_CONFIGURATION_BEFORE_ENABLING','E38_DuplicateFinderProcess'),autoClose:!1,}));},error:function(b){a.handleError(b);},});},deactivateProcess:function(){var a=this;app.alert.show('deactivating-process',{level:'process',title:app.lang.get('NTF_PROCESS_IS_BEING_DEACTIVATED','E38_DuplicateFinderProcess'),autoClose:!1,});app.data.createBean(a.module,{id:a.model.get('id')}).fetch({success:function(b){b.set('active','no');b.save({},{success:function(b){app.alert.dismiss('deactivating-process');app.alert.show('process-deactivated',{level:'success',messages:app.lang.get('NTF_PROCESS_DEACTIVATED','E38_DuplicateFinderProcess'),autoClose:!0,});delete a.action_buttons.e38_deactivate_process;a.action_buttons.e38_activate_process={id:'e38_activate_process',label:'LBL_ACTIVATE_PROCESS',classes:'btn btn-success btn-mini',};a.render();app.router.refresh();},error:function(b){a.handleError(b);},});},error:function(b){a.handleError(b);},});},handleError:function(a){app.alert.dismissAll();app.alert.show('server-error',{level:'error',messages:'ERR_GENERIC_SERVER_ERROR',autoClose:!1});app.error.handleHttpError(a);},});